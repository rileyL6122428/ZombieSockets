{"version":3,"sources":["webpack/bootstrap fc9bf11eae40ebc35cc9","./client/scripts/canvas_render_script.js","./client/scripts/utils/socket_initializer.js","./client/scripts/utils/player_input_handler.js","./client/scripts/rendering/renderer.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,iDAAgD,yBAAyB,EAAE;;;;;;;ACtB3E;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,qCAAoC,8BAA8B,EAAE;AACpE;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,kDAAiD,sBAAsB;AACvE,MAAK;AACL,IAAG;;AAEH;AACA,iCAAgC,iBAAiB,EAAE;AACnD;AACA;;;;;;;ACnBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH,+BAA8B,gCAAgC;AAC9D;;AAEA;AACA,4BAA2B,iBAAiB,EAAE;AAC9C;;AAEA;AACA,iCAAgC,wBAAwB,EAAE;AAC1D;;AAEA;AACA,4CAA2C,iBAAiB,EAAE;AAC9D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAAyB,2BAA2B;AACpD;AACA;AACA;AACA,0BAAyB;AACzB,IAAG;AACH;;AAEA,+BAA8B,wCAAwC;;AAEtE","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fc9bf11eae40ebc35cc9\n **/","var canvas = document.getElementById(\"canvas\");\nvar ctx = canvas.getContext('2d');\nvar halfWidth = (canvas.clientWidth - 30) / 2;\nvar halfHeight = (canvas.clientHeight - 30) / 2;\n\nvar sock = io();\nvar socketInitializer = require('./utils/socket_initializer.js');\nvar inputHandler = require('./utils/player_input_handler.js');\nvar renderer = require('./rendering/renderer.js');\nvar playerPositions = [[0, 0], [0, 0]];\n\nsocketInitializer.initializeSockets(sock, playerPositions);\nrenderer.setSocketListeners(sock);\ninputHandler.registerGameOverCB(sock);\n\nvar renderID = setInterval(function() {\n  if(renderer.readyToRender()) {\n    renderer.renderCanvasEl(ctx, playerPositions, halfWidth, halfHeight, sock);\n    inputHandler.handleInput(sock);\n  }\n}, 1000/30);\n\nwindow.addEventListener(\"beforeunload\", (e) => { clearInterval(renderID); });\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/scripts/canvas_render_script.js\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = {\n  initializeSockets: function (sock, positions) {\n    this.setupHandshakeReciever(sock);\n    this.setupNotificationReciever(sock);\n    this.setupPositionReciever(sock, positions);\n  },\n\n  setupPositionReciever: function (sock, positions) {\n    sock.on('position update', updatePositions);\n    function updatePositions(posArr) {\n      posArr.forEach((pos, idx) => { positions[idx] = posArr[idx]; });\n    }\n  },\n\n  setupHandshakeReciever: function (sock) {\n    sock.on('handShake', onHandshake);\n    function onHandshake(status) {\n      var handShake = document.getElementById(\"hand-shake\");\n      handShake.innerHTML = status;\n    }\n  },\n\n  setupNotificationReciever: function (sock) {\n    sock.on('msg', onMsg);\n    function onMsg(msg) {\n      var status = document.getElementById(\"server-messages\");\n      status.innerHTML = msg;\n    }\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/scripts/utils/socket_initializer.js\n ** module id = 1\n ** module chunks = 0\n **/","var _inputSetup = [\n  ['d', 'move right'],\n  ['a', 'move left'],\n  ['s', 'move down'],\n  ['w', 'move up']\n]\n\nvar gameOver = false;\n\nmodule.exports = {\n  handleInput: function(sock) {\n    _inputSetup.forEach(function(inputs) {\n      if(key.isPressed(inputs[0]) && !gameOver) {ã€€sock.emit(inputs[1]); }\n    });\n  },\n\n  registerGameOverCB: function (sock) {\n    sock.on('game over', () => { gameOver = true; });\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/scripts/utils/player_input_handler.js\n ** module id = 2\n ** module chunks = 0\n **/","var inputHandler = require(\"../utils/player_input_handler.js\");\nvar playerIdx;\nvar zombieIdxs = {};\nvar gameOver = false;\n\nvar renderer = {\n  renderCanvasEl: function (ctx, positions, halfWidth, halfHeight) {\n    ctx.clearRect(0, 0, 800, 550);\n    _render(ctx, positions, halfWidth, halfHeight);\n  },\n\n  setSocketListeners: function (s) {\n    _setZombieStatusListener(s);\n    _setPlayerIndexListener(s);\n    _setGameoverListener(s);\n  },\n\n  readyToRender: function () { return playerIdx !== undefined; }\n};\n\nfunction _setGameoverListener(s) {\n  s.on(\"game over\", () => { gameOver = true; })\n}\n\nfunction _setZombieStatusListener(s) {\n  s.on(\"Is a Zombie\", (idx) => { zombieIdxs[idx] = true; });\n}\n\nfunction _setPlayerIndexListener(s) {\n  s.on('register player number', (idx) => { playerIdx = idx; });\n}\n\nfunction _render(ctx, positions, halfWidth, halfHeight) {\n  var translatedX = -positions[playerIdx][0] + halfWidth;\n  var translatedY = -positions[playerIdx][1] + halfHeight;\n\n  if(gameOver) {\n    ctx.font = \"48px serif\";\n    ctx.strokeText(\"GAME OVER\", halfWidth - 150, halfHeight);\n  }\n  ctx.translate(translatedX, translatedY);\n  renderBoundary(ctx);\n  _renderPlayers(positions, ctx);\n  ctx.translate(-translatedX, -translatedY);\n}\n\nfunction _renderPlayers(positions, ctx) {\n  positions.forEach(function(pos, idx) {\n    if(zombieIdxs[idx]) { ctx.strokeStyle = 'green'; }\n    ctx.beginPath();\n    ctx.arc(pos[0], pos[1], 15, 0, 2 * Math.PI, false);\n    ctx.stroke();\n    if(zombieIdxs[idx]) { ctx.strokeStyle = 'black';}\n  });\n}\n\nfunction renderBoundary(ctx) { ctx.strokeRect(-500, -500, 1000, 1000); }\n\nmodule.exports = renderer;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/scripts/rendering/renderer.js\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}